window.g=function(){function k(b,e){var c=document.createElement("canvas");c.width=b;c.height=e;return c.getContext("2d")}return function(b,e,c){c=void 0===c?"red":c;var f=Math.max(b.naturalWidth,e.naturalWidth),h=Math.max(b.naturalHeight,e.naturalHeight),a=k(f,h),d=k(f,h);d.drawImage(b,0,0,b.naturalWidth,b.naturalHeight);a.drawImage(b,0,0,b.naturalWidth,b.naturalHeight);a.globalCompositeOperation="difference";a.drawImage(e,0,0,e.naturalWidth,e.naturalHeight);a.globalCompositeOperation="saturation";a.fillStyle="#FFF";a.fillRect(0,0,f,h);a.globalCompositeOperation="lighter";for(b=0;8>b;b++)a.drawImage(a.canvas,0,0);d.filter="invert(1)";d.globalCompositeOperation="multiply";d.drawImage(a.canvas,0,0);d.filter="none";a.globalCompositeOperation="multiply";a.fillStyle=c;a.fillRect(0,0,f,h);d.globalCompositeOperation="lighter";d.drawImage(a.canvas,0,0);return d.canvas}}();